# A2A 说明文档

## 该工具的功能

本工具旨在根据用户提供的自然语言描述，自动生成 JavaScript 代码，用于执行各种任务。它通过解析用户的意图，并将其转换为一系列可执行的 API 调用来实现。

### 支持的功能列表

本工具支持以下操作：

- **HTTP 请求**：发送 GET、POST、PUT、DELETE 等 HTTP 请求，并处理响应。
- **SQL 查询**：执行 SQL 查询，包括带参数的查询，并返回结果。
- **文件操作**：读取、写入和追加文件，支持本地文件和云存储（如 S3、OSS、Azure Blob）。支持常见文件格式如 JSON、XML、CSV、Excel 的解析。
- **邮件处理**：接收和发送电子邮件，并处理邮件内容和附件。
- **Shell 命令**：执行 Shell 命令，并返回输出。
- **大语言模型调用**：通过构建合适的提示词，调用大语言模型（LLM）来生成文本或执行其他自然语言任务。
- **IM 通知**：通过 Webhook 发送消息到 IM 服务（如 Slack, Telegram, 钉钉, 飞书, 企业微信）。
- **数据编解码**：进行 Base64、URL、Hex 编码/解码，MD5、SHA1、SHA256 哈希计算，以及 AES 加密/解密等操作。

## 完成整个业务逻辑

这些功能可以组合使用，完成复杂的业务流程。例如，用户可以先从数据库读取数据，然后将其转换为 JSON 格式，并通过 HTTP 请求发送到 API，最后将结果写入文件。

## 亮点

### 可以自动编写 SQL 来操作数据库

用户只需描述需要查询或更新的数据，工具会自动生成对应的 SQL 查询语句，并处理参数绑定，有效防止 SQL 注入。

### 可以自动编写提词来调用大模型

用户只需描述期望大模型完成的任务，工具会自动构建合适的系统提示和用户提示，并调用大模型进行处理。

### 可以自动拼装 HTTP 请求，并发起调用

用户只需提供 API 地址、请求方法、请求参数等信息，工具会自动生成 HTTP 请求，并处理响应。

### 可以读写多种存储方式的文件

用户可以使用统一的方式访问本地文件或云存储，工具会自动处理不同存储方式的差异。

### 可以处理图片、视频，进行格式转换、合并、组合、剪切等，用户只要描述需求即可

工具可以根据用户的描述，自动调用 ffmpeg 和 imagemagick 等工具，完成视频和图像的处理任务。

# 示例

## 用户提词单体示例

### 获取用户信息

- 使用场景：从用户数据库中获取特定用户的信息
- 用户提词：请查询 users 表中 id 为 123 的用户的 name, email, phone 字段。

### 发送邮件

- 使用场景：发送一封带有附件的邮件
- 用户提词：请发送邮件给 test@example.com，主题为“测试邮件”，内容为“你好，这是一封测试邮件”，并附上文件 /path/to/test.txt

### 上传文件到 S3

- 使用场景：将本地文件上传到 S3 存储
- 用户提词：请将文件 /path/to/upload.jpg 上传到 s3://my-bucket/images/

### 使用大模型生成文章

- 使用场景：使用大模型生成一篇关于人工智能的文章
- 用户提词：请使用大模型生成一篇 500 字关于人工智能的文章。

### 通知用户

- 使用场景：通过企业微信通知用户
- 用户提词：请通过企业微信发送消息，标题为“系统通知”，内容为“您的订单已发货”。

### 对字符串进行 base64 编码

- 使用场景：对字符串进行 base64 编码，用于数据传输
- 用户提词：请对字符串 "hello world" 进行 base64 编码。

## 用户提词的组合示例

### 数据同步与备份

- 使用场景：从 SQL 数据库读取数据，然后将数据备份到 S3
- 用户提词：请查询 users 表中所有用户的 id, name, email, 并将查询结果以 JSON 格式保存到 s3://my-bucket/backup/users.json

### 图片处理

- 使用场景：将图片缩放到指定尺寸，并添加水印
- 用户提词：请将图片 /path/to/input.png 缩放到 500x500 像素，并添加水印图片 /path/to/watermark.png 到右下角。

### 视频格式转换

- 使用场景：将视频文件转换为指定格式
- 用户提词：请将视频文件 /path/to/input.mp4 转换为 mkv 格式，并保存到 /path/to/output.mkv

### 从邮件中提取附件

- 使用场景：接收邮件，并提取邮件中的附件保存到本地
- 用户提词：请接收最新邮件，并将邮件中的附件保存到 /path/to/attachments 目录。

### 定时发送报表

- 使用场景：定时从数据库中读取数据，生成报表，并通过邮件发送
- 用户提词：请查询 order 表中最近 7 天的订单数据，并生成 excel 报表，发送给 admin@example.com。

# 与现有系统的对比

本工具的先进性在于其高度的自动化和灵活性。与现有的代码生成工具相比，它有以下优势：

- **更强的意图理解**：能够理解更复杂的自然语言描述，并将其转化为可执行的代码。
- **更全面的功能支持**：涵盖了从数据存储到处理、到通信的多个方面，可以构建完整的业务流程。
- **更强的集成能力**：无需编写复杂的代码，即可集成多种服务，如数据库、云存储、IM 服务、大语言模型等。
- **更灵活的处理能力**：可以处理各种类型的文件，包括文本、JSON、XML、CSV、Excel、图片和视频。
- **更强的可扩展性**：可以通过增加新的 API 调用来扩展功能。
- **更强的多模态支持**：支持图像的输入，可以处理图像相关的任务。

尽管市面上也有一些代码生成工具，但大多专注于特定领域，比如 SQL 生成或 Web 开发。而本工具试图提供一个更全面的解决方案，通过自然语言来实现各种任务的自动化。本工具的特点在于，用户无需关注底层的技术细节，只需描述自己的需求，即可完成任务。

总而言之，本工具旨在通过更高级别的抽象，让用户更专注于业务逻辑，而不是技术细节，从而提高开发效率。通过自动化代码的生成，能够让用户更容易地使用和管理各种数据和工具。
